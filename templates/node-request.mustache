var req = {
    method: '{{method}}',
    uri: domain + path,
    qs: queryParameters,
    headers: headers,
    body: body
};

var req = request['{{method}}''](domain + path);

// Type form
if(Object.keys(form).length > 0) {
    req.type('form')
}

// Type json
if(typeof(body) === 'object') {
    req.set('Content-Type', 'application/json');
}

req
.set(headers)
.query(queryParameters)
.send(body)
.end(function(response){
    if (!response.error) {
        return deferred.reject(response.error.message);
    }

    if(response.status >= 200 && response.status <= 299) {
       deferred.resolve({
         response: response,
         body: response.body
        });
    } else {
       deferred.reject({
         response: response,
         body: response.body
        });
    }
});
